{% extends "layout.html.twig" %}

{% block content %}
    <header id="header">
        <h1 {% if meta['title'] is empty %}class="empty"{% endif %}>{{ meta['title']|default("untitled") }}</h1>
        <aside>
            <i class="fa fa-user"></i> {{ meta['author'] ?: "unknown" }} &bullet;
            <i class="fa fa-code"></i> {{ meta['language'] }} &bullet;
            <i class="fa fa-calendar-o"></i> {{ meta['added'].format('d.m.Y H:i') }} &bullet;
            <a href="/{{ meta['slug'] }}/raw"><i class="fa fa-file-text-o"></i> raw</a> &bullet;
            <a href="#"><i class="fa fa-download"></i> save</a>

            {% if meta['description'] %}
                <p>{{ meta['description'] }}</p>
            {% endif %}
        </aside>
    </header>
    <pre class="keylighter">{{ paste|highlight(language)|lineify }}</pre>

    <form action="/{{ meta['slug'] }}" method="post" class="form absolute">
        <label for="title">Title =></label>
        <input name="title" id="title" value="{{ meta['title'] }}"/>

        <label for="author">Author =></label>
        <input name="author" id="author" value="{{ meta['author'] }}"/>

        <label for="language">Language =></label>
        <input name="language" id="language" value="{{ meta['language'] }}"/>

        <label for="key">Key =></label>
        <input name="key" id="key"/>

        <label for="description">Description =></label>
        <textarea name="description" id="description" cols="30" rows="10"></textarea>

        <button type="submit">ok</button>
    </form>
{% endblock %}

{% block scripts %}
    <script>
        document.getElementById('key').value = window.localStorage.getItem("key")
    </script>
{% endblock %}